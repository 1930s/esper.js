<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">

	<title>Esper.JS</title>

	<!-- Bootstrap core CSS -->
	<link href="http://bootswatch.com/darkly/bootstrap.css" rel="stylesheet">

	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
	<![endif]-->
	<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.2/ace.js"></script>
	<script src="http://angular-ui.github.io/ui-ace/dist/ui-ace.min.js"></script>
	<script src="esper.js"></script>
	<script src="https://estools.github.io/escodegen/escodegen.browser.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.2/mode-lua.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.2/mode-javascript.js"></script>
	<script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
	<style>
	.ace_editor { height: 500px; background-color: black; }
	textarea { width:100%; height: 100px; font-size: 14pt }
	.x { padding: 10px; color: white !important; }
	.f {  }
	.btn { margin-left: 5px; }
	.footer { margin-top: 20px; }
	.modal-body hr { margin-top: 0; margin-bottom: 0; }
	.executing {
		background-color: rgba(255,105,180,0.72); padding: 2px; position: absolute; z-index: 8;
	}
	.ace_gutter-layer .ace_breakpoint {
	    background-image: url(breakpoint.png);
	    background-position: 3px center;
	}
	.frames {
		border: 1px solid #cccccc; border-radius: 4px; 
		height: 140px; overflow: auto;
		background-color: #141414;
		padding: 10px;
		font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
	}
	.el {
		border-left: 3px solid #c0c0c0; margin-left: 1px; padding-left: 5px;

	}
	</style>
</head>

<body ng-app="MyApp" ng-controller="main">

	<div class="container">
		<div class="header">
			<ul class="nav nav-pills pull-right">
			 <li class="active"><a href="#" data-toggle="modal" data-target="#options">Options</a></li>
			</ul>
			<input style="float: right; margin-top: 10px; margin-right: 20px; width: 200px" ng-model="speed" type="range" min="0" max="10" step="1" />
			<h3 class="text-muted">esper.js</h3>
		</div>

		<div class="row" style="padding-top: 10px">
			<div class="col-sm-6">
				<div ng-model="code" ng-readonly="esper" ui-ace="{
					 useWrapMode : true,
					 showGutter: true,
					 theme:'twilight',
					 mode: 'javascript',
					 onLoad: aceLoaded,
					 onChange: aceChanged,
				 }"></div>
				<div>
					<div ng-if="!esper" style="margin-top: 10px; text-align: center"><a href="#" ng-click="start()" class="btn btn-success"><i class="glyphicon glyphicon-play"></i></a> </div>
					<div ng-if="esper" style="margin-top: 10px; text-align: center">
						<div  class="btn-group" role="group">
						<a ng-if="!auto" href="#" ng-click="play()" class="btn btn-success"><i class="glyphicon glyphicon-play"></i></a>
						<a ng-if="auto" href="#" ng-click="pause()" class="btn btn-info"><i class="glyphicon glyphicon-pause"></i></a>
						<a href="#" ng-click="step()" class="btn btn-warning"><i class="glyphicon glyphicon-step-forward"></i></a>
						<a href="#" ng-click="stop()" class="btn btn-danger"><i class="glyphicon glyphicon-stop"></i></a>
						</div>

					</div>
				
				</div>
		 	</div>
			<div class="col-sm-6">
				<pre ng-if="!error" class="x ace_editor ace_dark ace-twilight">{{output}}</pre>
				<pre ng-if="error" style="color: red !important" class="x ace_editor ace_dark ace-twilight">{{error}}</pre>
				<div class="frames">
					<div ng-repeat="frame in frames">
						{{frame.id}} - {{frame.type}} ({{frame.node}}@{{frame.loc}})
						<div class="el" ng-repeat="(k,v) in frame.vars">
							<span style="color: cyan">{{k}}</span> = <span style="color: lime">{{v}}</span>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="footer">
			<p>&copy; basicer 2016</p>
		</div>
	</div> <!-- /container -->
<div class="modal fade" id="options">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title">Parser Options</h4>
			</div>
			<div class="modal-body">
				<h5>JavaScript Compat</h5>
				<hr />
				<div class="row">
					<div class="col-sm-6">
						<div class="checkbox"><label><input type="checkbox" ng-model="opts.forceVar"> Force 'var' instead of 'let'</label></div>
						<div class="checkbox"><label><input type="checkbox" ng-model="opts.luaOperators"> Use library functions for operators</label></div>
						<div class="checkbox"><label><input type="checkbox" ng-model="opts.encloseWithFunctions"> Enclose scopes in functions</label></div>
					</div>
					<div class="col-sm-6">
						<div class="checkbox"><label><input type="checkbox" ng-model="opts.decorateLuaObjects"> Decorate Lua objects</label></div>
						<div class="checkbox"><label><input type="checkbox" ng-model="opts.luaCalls"> Proxy function calls </label></div>
						<div class="checkbox"><label><input type="checkbox" ng-model="opts.noMutliReturnSquish"> Dont unpack mutli returns </label></div>
					</div>
				</div>
				
				<h5>Error Handeling</h5>
				<hr />
				<div class="row">
					<div class="col-sm-6">
						<div class="checkbox"><label><input type="checkbox" ng-model="opts.loose"> Loose Mode</label></div>
					</div>
					<div class="col-sm-6">
						<div class="checkbox"><label><input type="checkbox" ng-model="opts.useStrict"> Use Strict</label></div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				 <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<script type="text/javascript" src="app.js"></script>
<pre style="display:none" id="exampleCode">
print("Okay!");

function fib(x) {
	if ( x == 1 ) return 1;
	if ( x == 2 ) return 1;
	return fib(x-1) + fib(x-2);
}

for ( var i = 1; i < 10; ++i ) {
	var f = fib(i);
	print(i, "\t", f);
}
</pre>
</body>
</html>

